.\" Automatically generated by Pod::Man 2.25 (Pod::Simple 3.20)
.\"
.\" Standard preamble:
.\" ========================================================================
.de Sp \" Vertical space (when we can't use .PP)
.if t .sp .5v
.if n .sp
..
.de Vb \" Begin verbatim text
.ft CW
.nf
.ne \\$1
..
.de Ve \" End verbatim text
.ft R
.fi
..
.\" Set up some character translations and predefined strings.  \*(-- will
.\" give an unbreakable dash, \*(PI will give pi, \*(L" will give a left
.\" double quote, and \*(R" will give a right double quote.  \*(C+ will
.\" give a nicer C++.  Capital omega is used to do unbreakable dashes and
.\" therefore won't be available.  \*(C` and \*(C' expand to `' in nroff,
.\" nothing in troff, for use with C<>.
.tr \(*W-
.ds C+ C\v'-.1v'\h'-1p'\s-2+\h'-1p'+\s0\v'.1v'\h'-1p'
.ie n \{\
.    ds -- \(*W-
.    ds PI pi
.    if (\n(.H=4u)&(1m=24u) .ds -- \(*W\h'-12u'\(*W\h'-12u'-\" diablo 10 pitch
.    if (\n(.H=4u)&(1m=20u) .ds -- \(*W\h'-12u'\(*W\h'-8u'-\"  diablo 12 pitch
.    ds L" ""
.    ds R" ""
.    ds C` ""
.    ds C' ""
'br\}
.el\{\
.    ds -- \|\(em\|
.    ds PI \(*p
.    ds L" ``
.    ds R" ''
'br\}
.\"
.\" Escape single quotes in literal strings from groff's Unicode transform.
.ie \n(.g .ds Aq \(aq
.el       .ds Aq '
.\"
.\" If the F register is turned on, we'll generate index entries on stderr for
.\" titles (.TH), headers (.SH), subsections (.SS), items (.Ip), and index
.\" entries marked with X<> in POD.  Of course, you'll have to process the
.\" output yourself in some meaningful fashion.
.ie \nF \{\
.    de IX
.    tm Index:\\$1\t\\n%\t"\\$2"
..
.    nr % 0
.    rr F
.\}
.el \{\
.    de IX
..
.\}
.\"
.\" Accent mark definitions (@(#)ms.acc 1.5 88/02/08 SMI; from UCB 4.2).
.\" Fear.  Run.  Save yourself.  No user-serviceable parts.
.    \" fudge factors for nroff and troff
.if n \{\
.    ds #H 0
.    ds #V .8m
.    ds #F .3m
.    ds #[ \f1
.    ds #] \fP
.\}
.if t \{\
.    ds #H ((1u-(\\\\n(.fu%2u))*.13m)
.    ds #V .6m
.    ds #F 0
.    ds #[ \&
.    ds #] \&
.\}
.    \" simple accents for nroff and troff
.if n \{\
.    ds ' \&
.    ds ` \&
.    ds ^ \&
.    ds , \&
.    ds ~ ~
.    ds /
.\}
.if t \{\
.    ds ' \\k:\h'-(\\n(.wu*8/10-\*(#H)'\'\h"|\\n:u"
.    ds ` \\k:\h'-(\\n(.wu*8/10-\*(#H)'\`\h'|\\n:u'
.    ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'^\h'|\\n:u'
.    ds , \\k:\h'-(\\n(.wu*8/10)',\h'|\\n:u'
.    ds ~ \\k:\h'-(\\n(.wu-\*(#H-.1m)'~\h'|\\n:u'
.    ds / \\k:\h'-(\\n(.wu*8/10-\*(#H)'\z\(sl\h'|\\n:u'
.\}
.    \" troff and (daisy-wheel) nroff accents
.ds : \\k:\h'-(\\n(.wu*8/10-\*(#H+.1m+\*(#F)'\v'-\*(#V'\z.\h'.2m+\*(#F'.\h'|\\n:u'\v'\*(#V'
.ds 8 \h'\*(#H'\(*b\h'-\*(#H'
.ds o \\k:\h'-(\\n(.wu+\w'\(de'u-\*(#H)/2u'\v'-.3n'\*(#[\z\(de\v'.3n'\h'|\\n:u'\*(#]
.ds d- \h'\*(#H'\(pd\h'-\w'~'u'\v'-.25m'\f2\(hy\fP\v'.25m'\h'-\*(#H'
.ds D- D\\k:\h'-\w'D'u'\v'-.11m'\z\(hy\v'.11m'\h'|\\n:u'
.ds th \*(#[\v'.3m'\s+1I\s-1\v'-.3m'\h'-(\w'I'u*2/3)'\s-1o\s+1\*(#]
.ds Th \*(#[\s+2I\s-2\h'-\w'I'u*3/5'\v'-.3m'o\v'.3m'\*(#]
.ds ae a\h'-(\w'a'u*4/10)'e
.ds Ae A\h'-(\w'A'u*4/10)'E
.    \" corrections for vroff
.if v .ds ~ \\k:\h'-(\\n(.wu*9/10-\*(#H)'\s-2\u~\d\s+2\h'|\\n:u'
.if v .ds ^ \\k:\h'-(\\n(.wu*10/11-\*(#H)'\v'-.4m'^\v'.4m'\h'|\\n:u'
.    \" for low resolution devices (crt and lpr)
.if \n(.H>23 .if \n(.V>19 \
\{\
.    ds : e
.    ds 8 ss
.    ds o a
.    ds d- d\h'-1'\(ga
.    ds D- D\h'-1'\(hy
.    ds th \o'bp'
.    ds Th \o'LP'
.    ds ae ae
.    ds Ae AE
.\}
.rm #[ #] #H #V #F C
.\" ========================================================================
.\"
.IX Title "TV08MERGEHELPER 1"
.TH TV08MERGEHELPER 1 "2016-02-12" "perl v5.16.3" "User Contributed Perl Documentation"
.\" For nroff, turn off justification.  Always turn off hyphenation; it makes
.\" way too many mistakes in technical documents.
.if n .ad l
.nh
.SH "NAME"
TV08Mergehelper \- TrecVid08 ViPER XML Events Observations Merger Helper
.SH "SYNOPSIS"
.IX Header "SYNOPSIS"
\&\fBTV08Mergehelper\fR [\ \fB\-\-help\fR\ |\ \fB\-\-man\fR\ |\ \fB\-\-version\fR\ ]
  [\fB\-\-xmllint\fR\ \fIlocation\fR]\ [\fB\-\-TrecVid08xsd\fR\ \fIlocation\fR]
  [\fB\-\-gtf\fR]\ [\fB\-\-ForceFilename\fR\ \fIfilename\fR]
  [\fB\-\-shift_overlap\fR\ \fB\-\-Same_overlap\fR\ [\fB\-\-overlaplistfile\fR\ [\fIfile\fR]]
  [\fB\-\-OverlapOnlyXML\fR]]\ [\fB\-\-ecfhelperfile\fR\ [\fIfile.csv\fR]]
  [\fB\-\-writetodir\fR\ \fIdirectory\fR\ [\fB\-\-WriteMemDump\fR\ [\fImode\fR]]]
  [\fB\-\-pruneEvents\fR]\ \ [\fB\-\-keep_id\fR]\ [\fB\-\-no_comment\fR]
  \fB\-\-fps\fR\ \fIfps\fR
  \fIviper_source_file.xml[\fI:frame_shift\fI]\fR [\fI...\fR]
.SH "DESCRIPTION"
.IX Header "DESCRIPTION"
\&\fBTV08MergeHelper\fR will load ViPER \s-1XML\s0 files, extract all their \fIEvent\fR \fIObservations\fR and for each \fISourcefile filename\fR will generate a new ViPER \s-1XML\s0 file containing all its \fIEvent\fR \fIObservations\fR.
The program can also perform \fIframe shift\fR of input files, and if requested provide a list of possible overlaps found in the file's overlap framespans.
It can also geneate a \s-1CVS\s0 file to help the generation of an \fI\s-1ECF\s0\fR (used by \fBTV08Scorer\fR).
\&\s-1XML\s0 comments are added within output files for each modifications to \fIEvents\fR, making it easier to find modifications and adaptations to \fIEvent\fR \fIObservations\fR.
.SH "PREREQUISITES"
.IX Header "PREREQUISITES"
\&\fBTV08MergeHelper\fR input files need to pass the \fBTV08ViperValidator\fR validation process, and relies on some external software and files.
.IP "\fB\s-1SOFTWARE\s0\fR" 4
.IX Item "SOFTWARE"
\&\fIxmllint\fR (part of \fIlibxml2\fR, see http://www.xmlsoft.org/) is required (at least version 2.6.30) to perform the syntactic validation of the source file.
If \fIxmllint\fR is not available in your \s-1PATH\s0, you can specify its location either on the command line (see \fB\-\-xmllint\fR) or by setting the F4DE_XMLLINT environment variable to the full path location of the \fIxmllint\fR executable.
.IP "\fB\s-1FILES\s0\fR" 4
.IX Item "FILES"
The syntactic validation requires some \s-1XML\s0 schema files (full list can be obtained using the \fB\-\-help\fR option).
It is possible to specify their location using the \fB\-\-xsdpath\fR.
You should not have to specify their location, if you have performed an install and have set the global environment variables.
.IP "\fB\s-1GLOBAL\s0 \s-1ENVIRONMENT\s0 \s-1VARIABLES\s0\fR" 4
.IX Item "GLOBAL ENVIRONMENT VARIABLES"
Once you have installed the software, extending your \fB\s-1PATH\s0\fR to include F4DE's \fBbin\fR directory should be sufficient for the tools to find their components.
.SH "GENERAL NOTES"
.IX Header "GENERAL NOTES"
\&\fBTV08MergeHelper\fR expects that the file can be been validated using 'xmllint' against the TrecVid08 \s-1XSD\s0 file(s) (see \fB\-\-help\fR for files list).
.PP
\&\fBTV08MergeHelper\fR will ignore the \fIconfig\fR section of the \s-1XML\s0 file, as well as discard any xml comment(s).
.SH "OPTIONS"
.IX Header "OPTIONS"
.IP "\fB\-\-ecfhelperfile\fR [\fIfile.csv\fR]" 4
.IX Item "--ecfhelperfile [file.csv]"
Ask \fBTV08MergeHelper\fR to generate a \s-1CVS\s0 \fIfile.csv\fR (if provided, standard output otherwise) containing an entry per ViPER file with information required to help in the generation of an \s-1ECF\s0 file.
.IP "\fB\-\-ForceFilename\fR \fIfilename\fR" 4
.IX Item "--ForceFilename filename"
Force every ViPER \s-1XML\s0 file loaded to use \fIfilename\fR as its \fIsourcefile\fR \fIfilename\fR.
.IP "\fB\-\-fps\fR \fIfps\fR" 4
.IX Item "--fps fps"
Specify the default sample rate of the ViPER files.
.IP "\fB\-\-gtf\fR" 4
.IX Item "--gtf"
Specify that the file to validate is a Reference file (also known as a Ground Truth File)
.IP "\fB\-\-help\fR" 4
.IX Item "--help"
Display the usage page for this program. Also display some default values and information.
.IP "\fB\-\-keep_id\fR" 4
.IX Item "--keep_id"
When adding an \fIobservation\fR to the merged file, keep the input file \fIobservation\fR \s-1ID\s0 or exit with an error message.
.Sp
By default, when adding an \fIobservation\fR to the merged file, the newly created observation will have the first available \s-1ID\s0.
.IP "\fB\-\-man\fR" 4
.IX Item "--man"
Display this man page.
.IP "\fB\-\-no_comment\fR" 4
.IX Item "--no_comment"
Do not add any comment to the merged file explaining the source of the event \fIobservation\fR.
.IP "\fB\-\-OverlapOnlyXML\fR" 4
.IX Item "--OverlapOnlyXML"
Create a ViPER \s-1XML\s0 file containing only an extended framespan \fIObservation\fR per \fIObservation\fRs that overlapped. For example, if the first framespan is 10:20 and the second 15:30, the overlap region is 15:20 but the new observation's framespan will be 10:30.
.IP "\fB\-\-overlaplistfile\fR [\fIfile\fR]" 4
.IX Item "--overlaplistfile [file]"
Generate a report (written to \fIfile\fR if provided, standard output otherwise) listing all possible \fIEvent\fR \fIObservation\fR overlaps seen according to the \fB\-\-shift_overlap\fR and \fB\-\-Same_overlap\fR heuristics.
.IP "\fB\-\-pruneEvents\fR" 4
.IX Item "--pruneEvents"
For each validated that is re-written, only add to this file's config section, events for which observations are seen
.IP "\fB\-\-Same_overlap\fR" 4
.IX Item "--Same_overlap"
Find \fIEvent\fR \fIObservation\fR overlap found within the framespan where the \fIObservation\fR's ViPER file overlaps, for files whose framespan's middlepoint does match.
.IP "\fB\-\-shift_overlap\fR" 4
.IX Item "--shift_overlap"
Find \fIEvent\fR \fIObservation\fR overlap found within the framespan where the \fIObservation\fR's ViPER file overlaps, for files whose framespan's middlepoint does not match.
.IP "\fB\-\-TrecVid08xsd\fR \fIlocation\fR" 4
.IX Item "--TrecVid08xsd location"
Specify the default location of the required \s-1XSD\s0 files (use \fB\-\-help\fR to get the list of required files).
.IP "\fB\-\-version\fR" 4
.IX Item "--version"
Display \fBTV08MergeHelper\fR version information.
.IP "\fB\-\-WriteMemDump\fR [\fImode\fR]" 4
.IX Item "--WriteMemDump [mode]"
In addition to writing the \s-1XML\s0 file, write a MemDump of the same file.
.Sp
\&\fImode\fR information can be obtained using \fB\-\-help\fR.
.IP "\fB\-\-writetodir\fR \fIdirectory\fR" 4
.IX Item "--writetodir directory"
Once merging has been completed, \fBTV08MergeHelper\fR will write a new \s-1XML\s0 representation of the sourcefile's filename file to the provided \fIdirectory\fR.
.IP "\fB\-\-xmllint\fR \fIlocation\fR" 4
.IX Item "--xmllint location"
Specify the full path location of the \fBxmllint\fR command line tool if not available in your \s-1PATH\s0.
Can also be set using the \fBF4DE_XMLLINT\fR environment variable.
.SH "USAGE"
.IX Header "USAGE"
.IP "\fBTV08MergeHelper \-\-xmllint /local/bin/xmllint \-\-TrecVid08xsd /local/F4DE\-CVS/data sys_test1.xml sys_test2.xml sys_test3.xml \-\-fps \s-1PAL\s0 \-\-writetodir /tmp\fR" 4
.IX Item "TV08MergeHelper --xmllint /local/bin/xmllint --TrecVid08xsd /local/F4DE-CVS/data sys_test1.xml sys_test2.xml sys_test3.xml --fps PAL --writetodir /tmp"
Will load the three \fIsystem\fR files (specifying the default sample rate at the \fI\s-1PAL\s0\fR frame rate), using the \fIxmllint\fR executable located at \fI/local/bin/xmllint\fR and the required \s-1XSD\s0 files found in the \fI/local/F4DE/data\fR directory. It will then write to the \fI/tmp\fR directory, one file per sourcefile's filename found in the input file. If \fIsys_test1.xml\fR sourcefile's filename is \fItesta.mpg\fR, and \fIsys_test2.xml\fR and \fIsys_test3.xml\fR sourcefile's filename is \fItestb.mpg\fR, the program will write the files \fI/tmp/testas.mpg.xml\fR and \fI/tmp/testb.mpg.xml\fR containing the \fIEvent\fR \fIObservations\fR seen in the \fIsystem\fR files.
.IP "\fBTV08MergeHelper \-\-gtf \-ForceFilename myvideo.mpg ref_test1.xml ref_test2.xml:2500 ref_test3.xml \-\-fps \s-1NTSC\s0 \-\-writetodir /tmp \-\-shift_overlap \-\-Same_overlap \-\-overlaplistfile /tmp/ovlist.txt \-\-ecfhelperfile ecfbase.csv\fR" 4
.IX Item "TV08MergeHelper --gtf -ForceFilename myvideo.mpg ref_test1.xml ref_test2.xml:2500 ref_test3.xml --fps NTSC --writetodir /tmp --shift_overlap --Same_overlap --overlaplistfile /tmp/ovlist.txt --ecfhelperfile ecfbase.csv"
Will load the three \fIreference\fR files (specifying the default sample rate at the \fI\s-1NTSC\s0\fR frame rate), shifting \fIref_test2.xml\fR by \fI2500\fR frames.
It will write a \s-1CVS\s0 file \fIecfbase.csv\fR that contains one entry per ViPER \s-1XML\s0 file (here one for \fIrest_test1.xml\fR, \fIref_test2.xml\fR and \fIref_test3.xml\fR) containing among other things the ViPER file's sourcefile's filename, as well as the file's framespan range.
It forces all ViPER file's sourcefile's filename to be \fImyvideo.mpg\fR, meaning that there will be only one output file \fI/tmp/myideo.mpg.xml\fR.
It will also write an \fBoverlaplistfile\fR \fI/tmp/ovlist.txt\fR that will contain both:
.RS 4
.IP "\(bu" 4
the list of \fBSame_overlap\fR \fIEvent\fR \fIObservations\fR overlaps.
By checking that for each pair of comparable \fIObservations\fR, their file framespan range is the same for both related file (ie the ViPER file's \fI\s-1NUMFRAMES\s0\fR is equal), it will find \fIEvent\fR \fIObservations\fR overlap within the files overlap zone (here the full file framespan range).
.IP "\(bu" 4
the list of \fBshift_overlap\fR \fIEvent\fR \fIObservations\fR overlaps.
By checking that for each pair of comparable \fIObservations\fR, the file framespan range is different for two \fIObservations\fR' file (ie the files middlepoint distance is not zero), it will find the \fIEvent\fR \fIObservations\fR that overlap within the files overlap zone (if file1 has a framespan range of 1:100 and file2 50:200, the overlap zone is 50:100).
.RE
.RS 4
.Sp
Note that the program will give a unique \s-1ID\s0 to each overlap it found and store them within the output \s-1XML\s0 file.
The \fBoverlaplistfile\fR is just a way to easily see the list of overlap found.
.RE
.SH "BUGS"
.IX Header "BUGS"
Please send bug reports to <nist_f4de@nist.gov>
.SH "AUTHORS"
.IX Header "AUTHORS"
Martial Michel <martial.michel@nist.gov>
.SH "COPYRIGHT"
.IX Header "COPYRIGHT"
This software was developed at the National Institute of Standards and Technology by employees of the Federal Government in the course of their official duties.  Pursuant to Title 17 Section 105 of the United States Code this software is not subject to copyright protection within the United States and is in the public domain. It is an experimental system.  \s-1NIST\s0 assumes no responsibility whatsoever for its use by any party.
.PP
\&\s-1THIS\s0 \s-1SOFTWARE\s0 \s-1IS\s0 \s-1PROVIDED\s0 \*(L"\s-1AS\s0 \s-1IS\s0.\*(R"  With regard to this software, \s-1NIST\s0 \s-1MAKES\s0 \s-1NO\s0 \s-1EXPRESS\s0 \s-1OR\s0 \s-1IMPLIED\s0 \s-1WARRANTY\s0 \s-1AS\s0 \s-1TO\s0 \s-1ANY\s0 \s-1MATTER\s0 \s-1WHATSOEVER\s0, \s-1INCLUDING\s0 \s-1MERCHANTABILITY\s0, \s-1OR\s0 \s-1FITNESS\s0 \s-1FOR\s0 A \s-1PARTICULAR\s0 \s-1PURPOSE\s0.
.SH "POD ERRORS"
.IX Header "POD ERRORS"
Hey! \fBThe above document had some coding errors, which are explained below:\fR
.IP "Around line 1088:" 4
.IX Item "Around line 1088:"
\&'=item' outside of any '=over'
.IP "Around line 1114:" 4
.IX Item "Around line 1114:"
You forgot a '=back' before '=head1'
